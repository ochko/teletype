#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/teletype'

exercises = File.join(File.dirname(__FILE__), '../', 'exercise')

if ARGV.first == '--list'
  Dir.glob(File.join(exercises, '**', '*.*')).each do |path|
    puts path.sub(File.join(exercises, ''), '')
  end
  exit
end

text = ''
paths = []
paths << 'base' if ARGV.length.zero?

paths.each do |path|
  path = File.join(exercises, path)
  if File.directory?(path)
    Dir.glob(File.join(path, '*.*')).each do |file|
      text += File.read(file)
    end
  elsif File.exist?(path)
    text += File.read(path)
  end
end

practice = Teletype::Practice.new(text)
practice.start
